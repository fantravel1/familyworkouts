---
/**
 * Today's Family Mission â€” cooperative, not competitive.
 * "Walk to Tokyo" style missions where minutes/steps unlock landmarks.
 */

const missions = [
  {
    title: "Walk to Tokyo",
    description: "Collect family movement minutes to virtually travel from your home to Tokyo! Every minute of movement = 1 mile.",
    icon: "ğŸ—¼",
    progress: 342,
    goal: 6700,
    unit: "miles",
    landmarks: [
      { name: "San Francisco", at: 0, emoji: "ğŸŒ‰" },
      { name: "Hawaii", at: 2400, emoji: "ğŸŒº" },
      { name: "Tokyo", at: 6700, emoji: "ğŸ—¼" },
    ],
    participants: "12,847 families walking together",
    color: "coral"
  },
  {
    title: "Dance Around the World",
    description: "Learn dances from every continent! Each family dance session unlocks a new country's moves.",
    icon: "ğŸ’ƒ",
    progress: 5,
    goal: 30,
    unit: "dances",
    landmarks: [
      { name: "Brazil", at: 0, emoji: "ğŸ‡§ğŸ‡·" },
      { name: "India", at: 15, emoji: "ğŸ‡®ğŸ‡³" },
      { name: "Japan", at: 30, emoji: "ğŸ‡¯ğŸ‡µ" },
    ],
    participants: "8,291 families dancing together",
    color: "purple"
  },
  {
    title: "Build a Family Fortress",
    description: "Every workout adds a brick to your virtual family fortress. 100 workouts = completed castle!",
    icon: "ğŸ°",
    progress: 23,
    goal: 100,
    unit: "bricks",
    landmarks: [
      { name: "Foundation", at: 0, emoji: "ğŸ§±" },
      { name: "Walls Up", at: 50, emoji: "ğŸ—ï¸" },
      { name: "Castle Complete", at: 100, emoji: "ğŸ°" },
    ],
    participants: "15,102 families building together",
    color: "ocean"
  },
];

// Rotate mission based on the day
const today = new Date();
const missionIndex = today.getDate() % missions.length;
const mission = missions[missionIndex];
const progressPercent = Math.min((mission.progress / mission.goal) * 100, 100);
---

<section class="mission-card">
  <!-- Decorative background -->
  <div class="absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl from-purple/10 to-transparent rounded-bl-full"></div>
  <div class="absolute bottom-0 left-0 w-24 h-24 bg-gradient-to-tr from-ocean/10 to-transparent rounded-tr-full"></div>

  <div class="relative z-10">
    <!-- Label -->
    <div class="inline-flex items-center gap-2 bg-white/80 backdrop-blur-sm text-navy font-bold text-xs px-3 py-1 rounded-full mb-4 uppercase tracking-wide">
      <span class="w-2 h-2 bg-forest rounded-full animate-pulse"></span>
      Today's Family Mission
    </div>

    <!-- Mission Title -->
    <div class="flex items-start gap-4 mb-4">
      <span class="text-5xl animate-float">{mission.icon}</span>
      <div>
        <h3 class="text-xl lg:text-2xl font-extrabold text-navy mb-1">{mission.title}</h3>
        <p class="text-soft-gray text-sm">{mission.description}</p>
      </div>
    </div>

    <!-- Progress Bar -->
    <div class="mb-3">
      <div class="flex justify-between text-xs font-semibold text-navy mb-1.5">
        <span>{mission.progress.toLocaleString()} {mission.unit}</span>
        <span>{mission.goal.toLocaleString()} {mission.unit}</span>
      </div>
      <div class="relative h-4 bg-gray-200 rounded-full overflow-hidden">
        <div
          class="absolute inset-y-0 left-0 bg-gradient-sunrise rounded-full transition-all duration-1000"
          style={`width: ${progressPercent}%`}
        >
          <div class="absolute inset-0 animate-shimmer rounded-full"></div>
        </div>
        <!-- Landmark markers -->
        {mission.landmarks.map((lm) => (
          <div
            class="absolute top-1/2 -translate-y-1/2 -translate-x-1/2 text-sm"
            style={`left: ${(lm.at / mission.goal) * 100}%`}
            title={lm.name}
          >
            {lm.emoji}
          </div>
        ))}
      </div>
    </div>

    <!-- Community Count -->
    <div class="flex items-center justify-between">
      <div class="flex items-center gap-2 text-sm text-soft-gray">
        <span class="text-lg">ğŸŒ</span>
        <span>{mission.participants}</span>
      </div>
      <a href="/challenges/" class="inline-flex items-center gap-1 text-sm font-semibold text-coral hover:text-coral/80 transition-colors">
        Join Mission
        <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M13 7l5 5m0 0l-5 5m5-5H6" />
        </svg>
      </a>
    </div>
  </div>
</section>
