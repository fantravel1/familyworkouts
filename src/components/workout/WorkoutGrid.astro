---
import WorkoutCard from './WorkoutCard.astro';

interface Workout {
  title: string;
  description: string;
  slug: string;
  category: string;
  duration: number;
  difficulty: 'beginner' | 'intermediate' | 'advanced';
  ageGroups: string[];
  thumbnailUrl?: string;
  youtubeId?: string;
  featured?: boolean;
}

interface Props {
  workouts: Workout[];
  title?: string;
  description?: string;
  columns?: 2 | 3 | 4;
  showViewAll?: boolean;
  viewAllLink?: string;
}

const {
  workouts,
  title,
  description,
  columns = 3,
  showViewAll = false,
  viewAllLink = '/workouts/'
} = Astro.props;

const gridCols: Record<number, string> = {
  2: 'grid-cols-1 sm:grid-cols-2',
  3: 'grid-cols-1 sm:grid-cols-2 lg:grid-cols-3',
  4: 'grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4',
};
---

<section class="py-8 lg:py-12">
  {(title || description) && (
    <div class="section-container mb-8">
      <div class="flex flex-col sm:flex-row sm:items-end sm:justify-between gap-4">
        <div>
          {title && (
            <h2 class="text-2xl lg:text-3xl font-bold text-navy mb-2">
              {title}
            </h2>
          )}
          {description && (
            <p class="text-soft-gray max-w-2xl">
              {description}
            </p>
          )}
        </div>
        {showViewAll && (
          <a
            href={viewAllLink}
            class="inline-flex items-center gap-2 text-coral font-semibold hover:text-coral/80 transition-colors whitespace-nowrap"
          >
            View All
            <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M17 8l4 4m0 0l-4 4m4-4H3" />
            </svg>
          </a>
        )}
      </div>
    </div>
  )}

  <div class="section-container">
    <div class:list={['grid gap-6', gridCols[columns]]}>
      {workouts.map((workout) => (
        <WorkoutCard {...workout} />
      ))}
    </div>

    {workouts.length === 0 && (
      <div class="text-center py-12">
        <div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
          <svg class="w-8 h-8 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
        </div>
        <h3 class="text-lg font-semibold text-navy mb-2">No workouts found</h3>
        <p class="text-soft-gray">Check back soon for new family workouts!</p>
      </div>
    )}
  </div>
</section>
